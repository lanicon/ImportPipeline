<?xml version="1.0" encoding="utf-8" ?>
<root importflags="fullimport">
   <endpoints>
      <endpoint name="countries" type="ESEndPoint" url="http://localhost:9200/" cache="100" maxparallel="0">
         <indexes>
            <index name="countries" config="countries.config.js"/>
         </indexes>
         <types>
            <type name="countrydoc" typename="doc" index="countries" _keyfield="_id" />  
         </types>
      </endpoint>
      <endpoint name="altnames" type="ESEndPoint" url="http://localhost:9200/" cache="100">
         <indexes>
            <index name="altnames" config="altnames.config.js" shards="5" async="true"/>
         </indexes>
         <types>
            <type name="altnamedoc" typename="doc" index="altnames" _keyfield="_id" />  
         </types>
      </endpoint>
      <endpoint name="names" type="ESEndPoint" url="http://localhost:9200/" cache="100" maxparallel="1">
         <indexes>
            <index name="names" config="names.config.js" shards="5"/>
         </indexes>
         <types>
            <type name="namedoc" typename="doc" index="names" _keyfield="_id" />  
         </types>
      </endpoint>
   </endpoints>

   <converters>
      <converter name="double" decimalsep="," groupsep="."/>
      <converter name="date"   utc="true" formats="yyyyMMdd"/>
      <converter name="lower" />
      <converter name="upper" />
      <converter name="trim" />
   </converters>

   <pipelines>
      <pipeline name="names" trace="false" converters="trim" endpoint="names.namedoc">
         <action key="file/record_end" add="*" />
         <action key="file/record/f0" field="nameId"/>
         <action key="file/record/f1" field="name"/>
         <action key="file/record/f3" field="altNames"/>
         <action key="file/record/f4" field="lat"/>
         <action key="file/record/f5" field="lon"/>
         <action key="file/record/f6" field="featureClass" />
         <action key="file/record/f7" field="featureCode"/>
         <action key="file/record/f8" field="countryCode"/>
         <action key="file/record/f9" field="altCountryCode"/>
         <action key="file/record/f10" field="admin1"/>
         <action key="file/record/f11" field="admin2"/>
         <action key="file/record/f12" field="admin3"/>
         <action key="file/record/f13" field="admin4"/>
         <action key="file/record/f14" field="population"/>
         <action key="file/record/f15" field="elevation"/>
         <action key="file/record/f16" field="dem"/>
         <action key="file/record/f17" field="timezone"/>
         <action key="file/record/f18" field="lastUpdate"/>
      </pipeline>

      <pipeline name="altnames" trace="false" converters="trim" endpoint="altnames.altnamedoc">
         <action key="file/record_end" add="*" />
         <action key="file/record/f0" field="altNameId"/>
         <action key="file/record/f1" field="nameId"/>
         <action key="file/record/f2" field="lang"/>
         <action key="file/record/f3" field="name"/>
         <action key="file/record/f4" field="isPreferred"/>
         <action key="file/record/f5" field="isShort"/>
         <action key="file/record/f6" field="isColloquial" />
         <action key="file/record/f7" field="isHistoric"/>
      </pipeline>

      <pipeline name="countries" trace="false" converters="trim" endpoint="countries.countrydoc">
         <action key="file/record_end" add="*" />
         <action key="file/record/f0" field="iso2"/>
         <action key="file/record/f1" field="iso3"/>
         <action key="file/record/f2" field="iso2Num"/>
         <action key="file/record/f3" field="fips"/>
         <action key="file/record/f4" field="name"/>
         <action key="file/record/f5" field="capital"/>
         <action key="file/record/f6" field="area" />
         <action key="file/record/f7" field="population"/>
         <action key="file/record/f8" field="continent"/>
         <action key="file/record/f9" field="tld"/>
         <action key="file/record/f10" field="curCode"/>
         <action key="file/record/f11" field="curName"/>
         <action key="file/record/f12" field="phone"/>
         <action key="file/record/f13" field="postalCode"/>
         <action key="file/record/f14" field="postalRegex"/>
         <action key="file/record/f15" field="lang"/>
         <action key="file/record/f16" field="id"/>
         <action key="file/record/f17" field="neighbors"/>
         <action key="file/record/f18" field="altFips"/>
      </pipeline>
   </pipelines>

   <datasources>
      <datasource name="altnames" type="csv" trim="false" active="false" file="E:\geonames\alternateNames.txt"  headers="false" dlm="\u0009" quote="\u0001" />
      <datasource name="names" active="false" type="csv" trim="true" file="E:\geonames\allCountries.txt"  headers="false" dlm="\u0009" quote="\u0001" />
      <datasource name="countries" active="false" type="csv" trim="true" file="E:\geonames\countryInfo.txt"  headers="false" dlm="\u0009" quote="\u0001" comment="#" />
   </datasources>
   
</root>
