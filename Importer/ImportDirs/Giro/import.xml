<?xml version="1.0" encoding="utf-8" ?>
<root importflags="fullimport">
   <script file="script.cs" />
   <endpoints>
      <endpoint name="giro" type="ESEndpoint" url="http://localhost:9200/" cache="100" maxparallel="1">
         <indexes>
            <index name="giro" indexname="a" config="index.config.js" shards="4"/>
         </indexes>
         <types>
            <type name="doc" index="giro" _keyfield="_id" />  
         </types>
      </endpoint>
   </endpoints>

   <converters>
      <converter name="double" decimalsep="," groupsep="."/>
      <converter name="date"   utc="true" formats="yyyyMMdd"/>
      <converter name="lower" />
      <converter name="upper" />
      <converter name="trim" />
   </converters>
   
   
   <pipelines>
      <pipeline name="giro" trace="true" converters="trim" script="ScriptExtension" >
         <action key="record" add="*" script="OnAdd"/>
         <action key="record/f0" field="date"/>
         <action key="record/f1" field="name"  script="SaveName"/>
         <action key="record/f2" field="account" flags="toarray|SkipEmpty"/>
         <action key="record/f3" field="account_other"  flags="toarray|SkipEmpty"/>
         <action key="record/ibanfromdesc" field="account_other"  flags="toarray|SkipEmpty"/>
         <action key="record/f4" field="mutation_code"/>
         <action key="record/f5" field="type"/>
         <action key="record/f6" field="amount" converters="double" />
         <action key="record/f7" field="mutation"/>
         <action key="record/f8" field="comment" script="OnDescription"/>
         <action key="record/f8" field="raw_comment"/>
      </pipeline>

   </pipelines>

   <datasources>
      <datasource name="giro"  type="csv" trim="false" active="true" file="3477492_01-01-2012_22-01-2014.csv"  headers="true" dlm="," quote='"'/>
   </datasources>
   
</root>
